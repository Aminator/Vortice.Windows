<?xml version="1.0" encoding="utf-8"?>
<config id="sharp-wic" xmlns="urn:SharpGen.Config">
  <assembly>SharpWIC</assembly>
  <namespace>SharpWIC</namespace>
  <depends>SharpDXGI</depends>

  <sdk name="WindowsSdk" version="10.0.17763.0" />
  <sdk name="StdLib" />

  <include file="d2dbasetypes.h" attach="true"/>
  <include file="wincodec.h" attach="true"/>
  <include file="dcommon.h">
    <attach>D2D1_ALPHA_MODE</attach>
    <attach>D2D1_PIXEL_FORMAT</attach>
  </include>

  <extension>
    <create class="PixelFormat" visibility="public sealed"/>
    <const from-guid="GUID_WICPixel(Format.*)" class="SharpWIC.PixelFormat" type="System.Guid" name="$1">new System.Guid("$1")</const>
    <!--<const from-guid="CLSID_WICImagingFactory" class="SharpWIC.ImagingFactory" type="System.Guid" name="WICImagingFactoryClsid">new System.Guid("$1")</const>-->

    <!--<create class="SharpD2D1.WIC.BitmapEncoderGuids" visibility="public sealed"/>
    <const from-guid="CLSID_WIC(.*)Encoder" class="SharpD2D1.WIC.BitmapEncoderGuids" type="System.Guid" name="$1">new System.Guid("$1")</const>

    <create class="SharpD2D1.WIC.ContainerFormatGuids" visibility="public sealed"/>
    <const from-guid="GUID_ContainerFormat(.*)" class="SharpD2D1.WIC.ContainerFormatGuids" type="System.Guid" name="$1">new System.Guid("$1")</const>

    <create class="SharpD2D1.WIC.BitmapDecoderGuids" visibility="public sealed"/>
    <const from-guid="CLSID_WIC(.*)Decoder" class="SharpD2D1.WIC.BitmapDecoderGuids" type="System.Guid" name="$1">new System.Guid("$1")</const>-->

    <create class="ResultCode" visibility="public"/>
    <const from-macro="WINCODEC_ERR_(.*)" type="SharpGen.Runtime.ResultDescriptor" cpp-type="int" name="$1" class="SharpWIC.ResultCode" visibility="public static readonly">new SharpGen.Runtime.ResultDescriptor($1, "$3", "$0", "$2")</const>
    
    <create class="D2D1" visibility="public static" />

    <define struct="System.Drawing.Rectangle" sizeof="16" />
  </extension>

  <bindings>
    <bind from="WICRect" to="System.Drawing.Rectangle"/>
    <bind from="HBITMAP" to="System.IntPtr"/>
    <bind from="HICON" to="System.IntPtr"/>
    <bind from="HPALETTE" to="System.IntPtr"/>
    <bind from="ID2D1Image" to="SharpGen.Runtime.ComObject"/>
    <bind from="ID2D1Device" to="SharpGen.Runtime.ComObject"/>
  </bindings>

  <naming>
    <short name="DESCRIPTOR">Descriptor</short>
    <short name="DESCRIPTION">Description</short>
    <short name="DESC">Description</short>
    <short name="TOPLEFT">TopLeft</short>
    <short name="UINT32">UInt32</short>
    <short name="UINT64">UInt64</short>
    <short name="IUNKNOWN">IUnknown</short>
    <short name="RECTANGLE">Rectangle</short>
    <short name="RECTS">Rectangles</short>
    <short name="RECT">Rectangle</short>
    <short name="POINT">Point</short>
    <short name="POINTS">Points</short>
    <short name="TRIANGLE">Triangle</short>
    <short name="LIST">List</short>
    <short name="ADJACENCY">Adjacency</short>
    <short name="ADJ">Adjacency</short>
    <short name="STRIP">Strip</short>
    <short name="SRV">ShaderResourceView</short>
    <short name="DSV">DepthStencilView</short>
    <short name="RTV">RenderTargetView</short>
    <short name="UAVS">UnorderedAccessViews</short>
    <short name="UAV">UnorderedAccessView</short>
    <short name="TEXTURE">Texture</short>
    <short name="TEXT">Text</short>
    <short name="CUBE">Cube</short>
    <short name="TEX">Texture</short>
    <short name="1D">1D</short>
    <short name="2D">2D</short>
    <short name="3D">3D</short>
    <short name="MS">Multisampled</short>
    <short name="RW">RW</short>
    <short name="ARRAYSIZE">ArraySize</short>
    <short name="ARRAYSLICE">ArraySlice</short>
    <short name="ARRAYS">Arrays</short>
    <short name="ARRAY">Array</short>
    <short name="BUFFERS">Buffers</short>
    <short name="BUFFER">Buffer</short>
    <short name="BUFFEREX">BufferExtended</short>
  </naming>

  <mapping>
    <!-- WIC enums -->
    <map enum="WIC(.*)" name="$1"/>
    <map enum="WIC8(.*)" name="$1"/>
    <map enum-item="WIC(.*)" name="$1"/>
    <map enum-item="WIC8(.*)" name="$1"/>

    <map enum="WICBitmapLockFlags" flags="true" none="true"/>
    <remove enum-item="WICBITMAPLOCKFLAGS_FORCE_DWORD" />
    
    <!--IWICBitmapLock-->
    <map method="IWICBitmapLock::GetDataPointer" visibility="internal"/>
    <map param="IWICBitmapLock::GetDataPointer::ppbData" attribute="out" type="void" return="true"/>

    <!--IWICBitmapSource -->
    <map method="IWICBitmapSource::CopyPixels" visibility="internal"/>
    <map param="IWICBitmapSource::CopyPixels::prc" type="void" attribute="in"/>
    <map param="IWICBitmapSource::CopyPixels::pbBuffer" type="void" />


    <!--IWICBitmap -->
    <map method="IWICBitmap::Lock" visibility="internal"/>
    <map param="IWICBitmap::Lock::ppILock" return="true"/>
    <map param="IWICBitmap::Lock::flags" type="WICBitmapLockFlags"/>
    <map param="IWICBitmap::Lock::prcLock" type="void" attribute="in"/>
    <map method="IWICBitmap::SetPalette" property="false"/>

  </mapping>
</config>
